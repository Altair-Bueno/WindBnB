---
import WindbnbLayout from "../../layouts/WindbnbLayout.astro";
import ViviendaComponent from "../../components/ViviendaComponent.astro";

import { ViviendaApi } from "../../api/A2viviendasREST/apis";

import {
  Configuration as ViviendaConfiguration,
  Vivienda,
} from "../../api/A2viviendasREST"

import AppConfig from "../../config";

const viviendaApi = new ViviendaApi(new ViviendaConfiguration(AppConfig.viviendas));
const viviendas = await viviendaApi.getViviendas()

---

<WindbnbLayout title="Viviendas">
  <form class="pb-3" method="post" action="/houses/new"> 
    <button class="btn btn-primary">Crear vivienda</button>
  </form>
  {
    viviendas.map(vivienda=> <ViviendaComponent vivienda = {vivienda} />)
  }

</WindbnbLayout>
